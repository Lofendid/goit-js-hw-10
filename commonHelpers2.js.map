{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-snackbar.js"],"sourcesContent":["import iziToast from \"izitoast\";\n\nconst iconError = new URL('/img/icons/error-icon.svg', import.meta.url).href;\nconst iconSuccess = new URL('/img/icons/ok-icon.svg', import.meta.url).href;\n\nconst radioBtns = document.querySelectorAll('fieldset [name=\"state\"]');\nconst submitBtn = document.querySelector('[type=\"submit\"]');\nconst form = document.querySelector('.form');\nconst delayInput = document.querySelector('[name=\"delay\"]');\n\nconst mistakeAlert = () => {\n    iziToast.show(\n        {\n            backgroundColor: 'rgba(239, 64, 64, 1)',\n            title: 'Error',\n            theme: 'dark',\n            message: `Rejected promise in ${delayInput.value} ms`,\n            position: 'topRight',\n            timeout: 5000,\n            iconUrl: iconError,\n        }\n    );\n};\n\nconst successAlert = () => {\n    iziToast.show(\n        {\n            backgroundColor: 'rgba(89, 161, 13, 1)',\n            title: 'OK',\n            theme: 'dark',\n            message: `Fulfilled promise in ${delayInput.value} ms`,\n            position: 'topRight',\n            timeout: 5000,\n            iconUrl: iconSuccess,\n        }\n    );\n};\n\nconst onSubmit = (e) => {\n    e.preventDefault();\n\n    const delay = Number(delayInput.value);\n    submitBtn.disabled = true;\n    \n    setTimeout(() => {\n        new Promise((resolve, reject) => {\n            const selectedBtn = Array.from(radioBtns).find(btn => btn.checked);\n            if (selectedBtn.value === 'fulfilled') {\n                resolve();\n            }\n            else if (selectedBtn.value === 'rejected') {\n                reject()\n            }\n        })\n            .then(() => successAlert())\n            .catch(() => mistakeAlert())\n            .finally(() => {\n                form.reset()\n                submitBtn.disabled = false;\n                delayInput.disabled = false;\n                radioBtns.forEach(btn => btn.disabled = false);\n            })\n    }, delay);\n\n    delayInput.disabled = true;\n    radioBtns.forEach(btn => btn.disabled = true);\n};\n\nform.addEventListener('submit', onSubmit);"],"names":["iconError","iconSuccess","radioBtns","submitBtn","form","delayInput","mistakeAlert","iziToast","successAlert","onSubmit","e","delay","resolve","reject","selectedBtn","btn"],"mappings":"yHAEA,MAAMA,EAAY,IAAA,IAAA,gDAAA,KAAA,QAAA,EAAsD,KAClEC,EAAc,IAAkD,IAAA,6CAAA,KAAA,QAAA,EAAC,KAEjEC,EAAY,SAAS,iBAAiB,yBAAyB,EAC/DC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAa,SAAS,cAAc,gBAAgB,EAEpDC,EAAe,IAAM,CACvBC,EAAS,KACL,CACI,gBAAiB,uBACjB,MAAO,QACP,MAAO,OACP,QAAS,uBAAuBF,EAAW,WAC3C,SAAU,WACV,QAAS,IACT,QAASL,CACZ,CACT,CACA,EAEMQ,EAAe,IAAM,CACvBD,EAAS,KACL,CACI,gBAAiB,uBACjB,MAAO,KACP,MAAO,OACP,QAAS,wBAAwBF,EAAW,WAC5C,SAAU,WACV,QAAS,IACT,QAASJ,CACZ,CACT,CACA,EAEMQ,EAAYC,GAAM,CACpBA,EAAE,eAAc,EAEhB,MAAMC,EAAQ,OAAON,EAAW,KAAK,EACrCF,EAAU,SAAW,GAErB,WAAW,IAAM,CACb,IAAI,QAAQ,CAACS,EAASC,IAAW,CAC7B,MAAMC,EAAc,MAAM,KAAKZ,CAAS,EAAE,KAAKa,GAAOA,EAAI,OAAO,EAC7DD,EAAY,QAAU,YACtBF,IAEKE,EAAY,QAAU,YAC3BD,EAAQ,CAExB,CAAS,EACI,KAAK,IAAML,GAAc,EACzB,MAAM,IAAMF,GAAc,EAC1B,QAAQ,IAAM,CACXF,EAAK,MAAO,EACZD,EAAU,SAAW,GACrBE,EAAW,SAAW,GACtBH,EAAU,QAAQa,GAAOA,EAAI,SAAW,EAAK,CAC7D,CAAa,CACR,EAAEJ,CAAK,EAERN,EAAW,SAAW,GACtBH,EAAU,QAAQa,GAAOA,EAAI,SAAW,EAAI,CAChD,EAEAX,EAAK,iBAAiB,SAAUK,CAAQ"}