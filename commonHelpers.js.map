{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\n\nconst iconError = new URL('/img/icons/error-icon.svg', import.meta.url).href; \n\nconst timerBtn = document.querySelector('[data-start]');\ntimerBtn.disabled = true;\n\nconst startBtn = 'Start';\nconst stopBtn = 'Stop';\n\nconst calendar = document.querySelector('#datetime-picker');\nconst daysRender = document.querySelector('[data-days]');\nconst hoursRender = document.querySelector('[data-hours]');\nconst minutesRender = document.querySelector('[data-minutes]');\nconst secondsRender = document.querySelector('[data-seconds]');\n\nlet userSelectedDate;\nlet timerInt;\n\nconst mistakeAlert = () => {\n    iziToast.show(\n        {\n            backgroundColor: 'rgba(239, 64, 64, 1)',\n            title: 'Error',\n            theme: 'dark',\n            message: 'Please choose a date in the future',\n            position: 'topRight',\n            timeout: 5000,\n            iconUrl: iconError,\n        }\n    );\n};\nconst formatConvert = (value) => {\n    return value.toString().padStart(2, '0')\n}\n\nconst convertMs = (ms) => {\n// Ms per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconst dateCheck = () => {\n    \n    if (userSelectedDate <= Date.now()) {\n\n        mistakeAlert();\n        timerBtn.disabled = true;\n        timerBtn.textContent = startBtn;\n        return false;\n    }\n    else {\n        timerBtn.disabled = false;\n        return true\n    }\n};\n\n\nflatpickr(calendar, {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onChange(selectedDates) {\n        userSelectedDate = selectedDates[0];\n        dateCheck();\n    },\n});\n\nconst startTimer = () => {\n    if (userSelectedDate) {\n        calendar.disabled = true;\n        timerInt = setInterval(() => {\n            const time = userSelectedDate - Date.now();\n            timerBtn.textContent = stopBtn;\n            if (time <= 0) {\n                stopTimer();\n            }\n            else {\n                const convertedToDate = convertMs(time);\n                daysRender.textContent = formatConvert(convertedToDate.days);\n                hoursRender.textContent = formatConvert(convertedToDate.hours);\n                minutesRender.textContent = formatConvert(convertedToDate.minutes);\n                secondsRender.textContent = formatConvert(convertedToDate.seconds);\n            };\n        }, 0);\n    }\n    else {\n        mistakeAlert();\n        return;\n    };\n};\n\nconst stopTimer = () => {\n    calendar.disabled = false;\n    clearInterval(timerInt);\n    timerBtn.textContent = startBtn;\n    timerBtn.disabled = true;\n    daysRender.textContent = formatConvert(0);\n    hoursRender.textContent = formatConvert(0);\n    minutesRender.textContent = formatConvert(0);\n    secondsRender.textContent = formatConvert(0);\n };\n\nconst onClick = (e) => {\n    if (timerBtn.textContent === stopBtn) {\n        stopTimer();\n    }\n    else if (timerBtn.textContent === startBtn && dateCheck() === true) {\n        startTimer();\n    }\n    else return mistakeAlert;\n    \n}\n\ntimerBtn.addEventListener('click', onClick);\n"],"names":["iconError","timerBtn","startBtn","stopBtn","calendar","daysRender","hoursRender","minutesRender","secondsRender","userSelectedDate","timerInt","mistakeAlert","iziToast","formatConvert","value","convertMs","ms","days","hours","minutes","seconds","dateCheck","flatpickr","selectedDates","startTimer","time","stopTimer","convertedToDate","onClick","e"],"mappings":"qIAIA,MAAMA,EAAY,IAAqD,IAAA,gDAAA,KAAA,QAAA,EAAC,KAElEC,EAAW,SAAS,cAAc,cAAc,EACtDA,EAAS,SAAW,GAEpB,MAAMC,EAAW,QACXC,EAAU,OAEVC,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAgB,SAAS,cAAc,gBAAgB,EACvDC,EAAgB,SAAS,cAAc,gBAAgB,EAE7D,IAAIC,EACAC,EAEJ,MAAMC,EAAe,IAAM,CACvBC,EAAS,KACL,CACI,gBAAiB,uBACjB,MAAO,QACP,MAAO,OACP,QAAS,qCACT,SAAU,WACV,QAAS,IACT,QAASZ,CACZ,CACT,CACA,EACMa,EAAiBC,GACZA,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EAGrCC,EAAaC,GAAO,CAQxB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,EAEMC,EAAY,IAEVZ,GAAoB,KAAK,OAEzBE,IACAV,EAAS,SAAW,GACpBA,EAAS,YAAcC,EAChB,KAGPD,EAAS,SAAW,GACb,IAKfqB,EAAUlB,EAAU,CAChB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,SAASmB,EAAe,CACpBd,EAAmBc,EAAc,GACjCF,GACH,CACL,CAAC,EAED,MAAMG,EAAa,IAAM,CACrB,GAAIf,EACAL,EAAS,SAAW,GACpBM,EAAW,YAAY,IAAM,CACzB,MAAMe,EAAOhB,EAAmB,KAAK,IAAG,EAExC,GADAR,EAAS,YAAcE,EACnBsB,GAAQ,EACRC,QAEC,CACD,MAAMC,EAAkBZ,EAAUU,CAAI,EACtCpB,EAAW,YAAcQ,EAAcc,EAAgB,IAAI,EAC3DrB,EAAY,YAAcO,EAAcc,EAAgB,KAAK,EAC7DpB,EAAc,YAAcM,EAAcc,EAAgB,OAAO,EACjEnB,EAAc,YAAcK,EAAcc,EAAgB,OAAO,CACjF,CACS,EAAE,CAAC,MAEH,CACDhB,IACA,MACR,CACA,EAEMe,EAAY,IAAM,CACpBtB,EAAS,SAAW,GACpB,cAAcM,CAAQ,EACtBT,EAAS,YAAcC,EACvBD,EAAS,SAAW,GACpBI,EAAW,YAAcQ,EAAc,CAAC,EACxCP,EAAY,YAAcO,EAAc,CAAC,EACzCN,EAAc,YAAcM,EAAc,CAAC,EAC3CL,EAAc,YAAcK,EAAc,CAAC,CAC/C,EAEMe,EAAWC,GAAM,CACnB,GAAI5B,EAAS,cAAgBE,EACzBuB,YAEKzB,EAAS,cAAgBC,GAAYmB,EAAS,IAAO,GAC1DG,QAEC,QAAOb,CAEhB,EAEAV,EAAS,iBAAiB,QAAS2B,CAAO"}